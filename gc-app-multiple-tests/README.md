# Множественная проверка гипотез при проведении A/B-теста для приложения для удаления мусора на физическом носителе

## Описание кейса

- **Продукт**: Shareware(PC) приложение (еженедельная/ежемесячная подписка), удаляющее мусор на физическом носителе
- **Тестируемое изменение**: отмена платежной системы для определенных пакетов. Теперь некоторые пакеты можно оплатить только определенной платежной системой, а не всеми. Изменение направлено на снижение расходов на комиссиях (поддерживать все платежки – дорого), благодаря изменению набора пакетов на платежку, которые можно приобрести (подверглись изменениям пакеты Yc и St)

## Описание данных

- `orderRevenue` – сумма списаний;
- `purchaseSystem` – тип платежной системы:
    - `PP` – Paypal;
    - `St` – Stripe;
    - `Yc` – Yandex Касса;
- `experimentVariant` – вариант теста (`Control` – контроль, `Treatment` – тест).

## Задача

Проверить гипотезы:

- есть ли значимое изменение в большую или меньшую сторону у суммы списаний в зависимости от варианта теста;
- есть ли значимое изменение в большую или меньшую сторону у суммы списаний в зависимости от варианта теста и платежной системы.

## Результат работы

В ходе работы над кейсом мы проанализировали данные, полученные в результате проведения A/B-теста для приложения для удаления мусора на физическом носителе, и провели множественную проверку гипотез.

**EDA**

*Сумма списаний в зависимости от варианта теста*

- распределение значений суммы списаний обоих вариантов близко к нормальному;
- среднее значение суммы списаний в тестовом варианте ниже аналогичного показателя контрольного варианта, но при этом 95%-ые доверительные интервалы значений суммы списаний двух вариантов пересекаются

*Сумма списаний в зависимости от типа платежной системы и варианта теста*

- распределение значений суммы списаний всех контрольных вариантов и тестового варианта платежной системы `Pp` близко к нормальному; распределение значений суммы списаний тестовых вариантов платежных систем `St` и `Yc` напоминает распределение с двумя вершинами (возможно среди пользователей сервиса есть две группы пользователей в зависимости от платежного паттерна);
- **Pp**: среднее значение суммы списаний в тестовом варианте выше аналогичного показателя контрольного варианта, но при этом 95%-ые доверительные интервалы значений суммы списаний двух вариантов практически пересекаются;
- **St**: среднее значение суммы списаний в тестовом варианте выше аналогичного показателя контрольного варианта, при этом 95%-ые доверительные интервалы значений суммы списаний двух вариантов не пересекаются;
- **Yc**: среднее значение суммы списаний в тестовом варианте ниже аналогичного показателя контрольного варианта, при этом 95%-ые доверительные интервалы значений суммы списаний двух вариантов практически пересекаются

**Проверка гипотез**

На данном этапе мы проверили две гипотезы:

1. есть ли значимое изменение в большую или меньшую сторону у суммы списаний в зависимости от варианта теста;
2. есть ли значимое изменение в большую или меньшую сторону у суммы списаний в зависимости от варианта теста и платежной системы.

Для проверки обеих гипотез мы использовали двухсторонний t-тест:

- мы предположительно имеем дело с нормальным распределением;
- мы хотим сравнить средние значения;
- мы имеем достаточно достаточно наблюдений (>30 на варианту).

Для проверки обеих гипотез мы установили уровень значимости 95% и соответствующее ему значение α = 0.05

*Есть ли значимое изменение в большую или меньшую сторону у суммы списаний в зависимости от варианта теста*

Мы сформулировли нулевую и альтернативную гипотезы:

- **нулевая гипотеза**: средние суммы списаний в контрольном и тестовом вариантах равны;
- **альтернативная гипотеза**: средние суммы списаний в контрольном и тестовом вариантах различаются.

Полученный p-value (0.587) больше установленного значения α (0.05), поэтому на уровне значимости 95% мы не смогли отвергуть нулевую гипотезу о равенстве  средних сумм списаний в контрольном и тестовом вариантах.

*Есть ли значимое изменение в большую или меньшую сторону у суммы списаний в зависимости от варианта теста и платежной системы*

Мы сформулировли нулевую и альтернативную гипотезы:

- **нулевая гипотеза**: средние суммы списаний с использованием платежной системы в контрольном и тестовом вариантах равны;
- **альтернативная гипотеза**: средние суммы списаний с использованием платежной системы в контрольном и тестовом вариантах различаются.

Поскольку мы проводили множественную проверку гипотез, мы использовали коррекцию Холмса для полученных p-values.

- **Pp**: полученный скорректированный p-value (0.382671) больше установленного значения α (0.05), поэтому на уровне значимости 95% мы не смогли отвергуть нулевую гипотезу о равенстве средних сумм списаний с использованием платежной системы в контрольном и тестовом вариантах;
- **St**: полученный скорректированный p-value (0.005263) меньше установленного значения α (0.05), поэтому на уровне значимости 95% мы смогли отвергуть нулевую гипотезу о равенстве средних сумм списаний с использованием платежной системы в контрольном и тестовом вариантах в пользу альтернативной гипотезы об их различии (среднее значение суммы списаний в тестовом варианте выше аналогичного показателя контрольного варианта);
- **Yc**: полученный скорректированный p-value (0.0) меньше установленного значения α (0.05), поэтому на уровне значимости 95% мы смогли отвергуть нулевую гипотезу о равенстве средних сумм списаний с использованием платежной системы в контрольном и тестовом вариантах в пользу альтернативной гипотезы об их различии (среднее значение суммы списаний в тестовом варианте ниже аналогичного показателя контрольного варианта).
